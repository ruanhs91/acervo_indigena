{% extends "acervo/base.html" %}

{% block title %}Painel de moderação — Povos Indígenas do RN{% endblock %}

{% block content %}
<main class="container my-5">
  <h2 class="fw-bold text-center mb-5" style="color: #8b0000;">Painel de Moderação</h2>

  <section class="mb-5">
    <h3 class=" fw-semibold mb-4" style="color: #8b0000;">
      <i class="bi bi-image" ></i> Imagens
    </h3>

    {% if imagens %}
      <div class="row g-4">
        {% for img in imagens %}
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
              <img src="{{ img.imagem.url }}" class="card-img-top img-fluid" alt="{{ img.titulo_img }}">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ img.titulo_img }}</h5>
                <p class="card-text text-muted">{{ img.descricao_img }}</p>
                <p class="mb-2"><strong>Autor:</strong> {{ img.autor_img }}</p>
                <div class="mt-auto d-flex gap-2">
                  <a href="{% url 'acervo:aprovar_conteudo' 'imagem' img.id %}" class="btn btn-success btn-sm flex-fill">
                    <i class="bi bi-check-lg"></i> Aprovar
                  </a>
                  <a href="{% url 'acervo:rejeicao_conteudo' 'imagem' img.id %}" class="btn btn-danger btn-sm flex-fill">
                    <i class="bi bi-x-lg"></i> Rejeitar
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted ms-3">Nenhuma imagem pendente.</p>
    {% endif %}
  </section>

  <section class="mb-5">
    <h3 class=" fw-semibold mb-4" style="color:#8b0000">
      <i class="bi bi-link-45deg"></i> Links
    </h3>

    {% if links %}
      <div class="row g-4">
        {% for link in links %}
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ link.titulo_link }}</h5>
                <p class="card-text text-muted">{{ link.descricao_link }}</p>
                <a href="{{ link.url }}" target="_blank" class="text-primary text-truncate mb-2">{{ link.url }}</a>
                <p class="mb-2"><strong>Autor:</strong> {{ link.autor }}</p>
                <div class="mt-auto d-flex gap-2">
                  <a href="{% url 'acervo:aprovar_conteudo' 'link' link.id %}" class="btn btn-success btn-sm flex-fill">
                    <i class="bi bi-check-lg"></i> Aprovar
                  </a>
                  <a href="{% url 'acervo:rejeicao_conteudo' 'link' link.id %}" class="btn btn-danger btn-sm flex-fill">
                    <i class="bi bi-x-lg"></i> Rejeitar
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted ms-3">Nenhum link pendente.</p>
    {% endif %}
  </section>

  <section class="mb-5">
    <h3 class="fw-semibold mb-4" style="color:#8b0000">
      <i class="bi bi-journal-text"></i> Artigos
    </h3>

    {% if artigos %}
      <div class="row g-4">
        {% for artigo in artigos %}
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ artigo.titulo_artigo }}</h5>
                <p class="card-text text-muted">{{ artigo.descricao_artigo }}</p>
                <a href="{{ artigo.arquivo.url }}" target="_blank" class="text-primary text-truncate mb-2">Ver arquivo</a>
                <p class="mb-2"><strong>Autor:</strong> {{ artigo.autor_artigo }}</p>
                <div class="mt-auto d-flex gap-2">
                  <a href="{% url 'acervo:aprovar_conteudo' 'artigo' artigo.id %}" class="btn btn-success btn-sm flex-fill">
                    <i class="bi bi-check-lg"></i> Aprovar
                  </a>
                  <a href="{% url 'acervo:rejeicao_conteudo' 'artigo' artigo.id %}" class="btn btn-danger btn-sm flex-fill">
                    <i class="bi bi-x-lg"></i> Rejeitar
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted ms-3">Nenhum artigo pendente.</p>
    {% endif %}
  </section>

  <section class="mb-5">
    <h3 class="fw-semibold mb-4" style="color:#8b0000">
      <i class="bi bi-camera-video"></i> Vídeos
    </h3>

    {% if videos %}
      <div class="row g-4">
        {% for video in videos %}
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ video.titulo_video }}</h5>
                <p class="card-text text-muted">{{ video.descricao_video }}</p>
                <video class="w-100 rounded mb-2" controls>
                  <source src="{{ video.video.url }}" type="video/mp4">
                  Seu navegador não suporta vídeos.
                </video>
                <p class="mb-2"><strong>Autor:</strong> {{ video.autor_video }}</p>
                <div class="mt-auto d-flex gap-2">
                  <a href="{% url 'acervo:aprovar_conteudo' 'video' video.id %}" class="btn btn-success btn-sm flex-fill">
                    <i class="bi bi-check-lg"></i> Aprovar
                  </a>
                  <a href="{% url 'acervo:rejeicao_conteudo' 'video' video.id %}" class="btn btn-danger btn-sm flex-fill">
                    <i class="bi bi-x-lg"></i> Rejeitar
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted ms-3">Nenhum vídeo pendente.</p>
    {% endif %}
  </section>

</main>
{% endblock %}

